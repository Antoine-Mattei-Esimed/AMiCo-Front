<!--
  ~ AMiCo - Logiciel de gestion de micro-entreprises.
  ~ Copyright (c) 2023 - Antoine Mattei
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>AMiCo</title>
		<meta charset="UTF-8">
		<link href="res/AMiCo%20Logo.svg"
			  rel="shortcut icon"
			  type="image/x-icon">
		<meta content="width=device-width, initial-scale=1.0"
			  name="viewport">
		<link crossorigin="anonymous"
			  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
			  integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
			  rel="stylesheet">
		<script crossorigin="anonymous"
				integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
				src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
		<link href="https://fonts.googleapis.com"
			  rel="preconnect">
		<link crossorigin
			  href="https://fonts.gstatic.com♣"
			  rel="preconnect">
		<link href="https://fonts.googleapis.com/css2?family=K2D&display=swap"
			  rel="stylesheet">
		<link href="res/css/index.css"
			  rel="stylesheet"
			  type="text/css"/>
	</head>
	<body class="bg-dark text-bg-dark"
		  data-bs-theme="dark">
		<nav class="navbar navbar-expand-lg">
			<div class="container-fluid">
				<a class="navbar-brand"
				   href="#"
				   style="font-family: 'K2D', sans-serif; color: #A83E3E;">
					<img alt="Logo"
						 class="d-inline-block align-text-top"
						 height="30"
						 src="res/AMiCo%20Logo.svg"
						 width="30">
					<strong>AMiCo</strong>
				</a>
				<button aria-controls="navbarNav"
						aria-expanded="false"
						aria-label="Toggle navigation"
						class="navbar-toggler"
						data-bs-target="#navbarNav"
						data-bs-toggle="collapse"
						type="button">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse"
					 id="navbarNav">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a aria-current="page"
							   class="nav-link"
							   href="#">Clients
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link"
							   href="#">Projets
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link"
							   href="#">Facturations
							</a>
						</li>
					</ul>
					<span class="navbar-text"
						  onclick="disconnect()"
						  style="cursor: pointer">
						Déconnexion
					</span>
				</div>
			</div>
		</nav>
		<div class="container"
			 id="content"></div>
		
		
		<div aria-atomic="true"
			 aria-live="assertive"
			 class="toast align-items-center text-white bg-success border-0 position-fixed top-0 end-0"
			 id="toast-success"
			 role="alert">
			<div class="d-flex">
				<div class="toast-body"
					 id="body-toast-success">
				</div>
				<button aria-label="Close"
						class="btn-close btn-close-white me-2 m-auto"
						data-bs-dismiss="toast"
						type="button"></button>
			</div>
		</div>
		
		<div aria-atomic="true"
			 aria-live="assertive"
			 class="toast align-items-center text-white bg-danger border-0 position-fixed top-0 end-0"
			 id="toast-fail"
			 role="alert">
			<div class="d-flex">
				<div class="toast-body"
					 id="body-toast-fail">
				</div>
				<button aria-label="Close"
						class="btn-close btn-close-white me-2 m-auto"
						data-bs-dismiss="toast"
						type="button"></button>
			</div>
		</div>
		
		<script src="app/services/userApi.js"
				type="application/ecmascript"></script>
		<script src="app/services/authApi.js"
				type="application/ecmascript"></script>
		
		<script src="app/model/userModel.js"
				type="application/ecmascript"></script>
		
		<script src="app/tools.js"
				type="application/ecmascript"></script>
		<script>
			function disconnect() {
				navigate( "login" );
				window.sessionStorage.removeItem( "token" );
			}
			
			if ( !localStorage.getItem( "token" ) ) {
				navigate( "register" );
			} else {
				navigate( "index" );
			}
		</script>
	</body>
</html>
